{"ast":null,"code":"var _jsxFileName = \"E:\\\\KTCity\\\\react-course-project\\\\react-monkey-blogging\\\\src\\\\module\\\\post\\\\PostManage.js\",\n    _s = $RefreshSig$();\n\nimport { Button } from \"components/button\";\nimport { Dropdown } from \"components/dropdown\";\nimport { Table } from \"components/table\";\nimport { db } from \"firebase-app/firebase-config\";\nimport { collection, getDocs, limit, onSnapshot, query, where } from \"firebase/firestore\";\nimport DashboardHeading from \"module/dashboard/DashboardHeading\";\nimport React, { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst POST_PER_PAGE = 10;\n\nconst PostManage = () => {\n  _s();\n\n  const [postList, setPostList] = useState([]);\n  const [filter, setFilter] = useState(\"\");\n  const [lastDoc, setLastDoc] = useState();\n  useEffect(() => {\n    async function fetchData() {\n      const colRef = collection(db, \"posts\");\n      const newRef = filter ? query(colRef, where(\"name\", \">=\", filter), where(\"name\", \"<=\", filter + \"utf8\")) : query(colRef, limit(POST_PER_PAGE));\n      const documentSnapshots = await getDocs(newRef);\n      const lastVisible = documentSnapshots.docs[documentSnapshots.docs.length - 1];\n      onSnapshot(newRef, snapshot => {\n        let results = [];\n        snapshot.forEach(doc => {\n          results.push({\n            id: doc.id,\n            ...doc.data()\n          });\n        });\n        setPostList(results);\n      });\n      setLastDoc(lastVisible);\n    }\n\n    fetchData();\n  }, [filter]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(DashboardHeading, {\n      title: \"All posts\",\n      desc: \"Manage all posts\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-10 flex justify-end gap-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-[200px]\",\n        children: /*#__PURE__*/_jsxDEV(Dropdown, {\n          children: /*#__PURE__*/_jsxDEV(Dropdown.Select, {\n            placeholder: \"Category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full max-w-[300px]\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"w-full p-4 rounded-lg border border-solid border-gray-300\",\n          placeholder: \"Search post...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Id\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Author\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Actions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: postList.length > 0 && postList.map(post => {\n          var _post$createdAt, _post$createdAt2, _post$createdAt3, _post$category, _post$user;\n\n          const date = post !== null && post !== void 0 && (_post$createdAt = post.createdAt) !== null && _post$createdAt !== void 0 && _post$createdAt.seconds ? new Date((post === null || post === void 0 ? void 0 : (_post$createdAt2 = post.createdAt) === null || _post$createdAt2 === void 0 ? void 0 : _post$createdAt2.seconds) * 1000) : new Date();\n          const formatDate = new Date(date).toLocaleDateString(\"vi-VI\");\n          console.log(new Date((post === null || post === void 0 ? void 0 : (_post$createdAt3 = post.createdAt) === null || _post$createdAt3 === void 0 ? void 0 : _post$createdAt3.seonds) * 1000));\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: post.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-x-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: post.image,\n                  alt: \"\",\n                  className: \"w-[66px] h-[55px] rounded object-cover\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 92,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"font-semibold max-w-[100px] whitespace-pre-wrap\",\n                    children: post.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 98,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"time\", {\n                    className: \"text-sm text-gray-500\",\n                    children: [\"Date: \", formatDate]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 101,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-500\",\n                children: (_post$category = post.category) === null || _post$category === void 0 ? void 0 : _post$category.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-500\",\n                children: (_post$user = post.user) === null || _post$user === void 0 ? void 0 : _post$user.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-x-3 text-gray-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"flex items-center justify-center w-10 h-10 border border-gray-200 rounded cursor-pointer\",\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    className: \"w-5 h-5\",\n                    fill: \"none\",\n                    viewBox: \"0 0 24 24\",\n                    stroke: \"currentColor\",\n                    strokeWidth: \"2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\",\n                      d: \"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 124,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\",\n                      d: \"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 129,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 116,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"flex items-center justify-center w-10 h-10 border border-gray-200 rounded cursor-pointer\",\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    className: \"w-5 h-5\",\n                    fill: \"none\",\n                    viewBox: \"0 0 24 24\",\n                    stroke: \"currentColor\",\n                    strokeWidth: \"2\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\",\n                      d: \"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 145,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 137,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"flex items-center justify-center w-10 h-10 border border-gray-200 rounded cursor-pointer\",\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    className: \"w-5 h-5\",\n                    fill: \"none\",\n                    viewBox: \"0 0 24 24\",\n                    stroke: \"currentColor\",\n                    strokeWidth: \"2\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\",\n                      d: \"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 161,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 19\n            }, this)]\n          }, post.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-10 text-center\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        kind: \"ghost\",\n        className: \"mx-auto w-[200px]\",\n        children: \"See more+\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PostManage, \"G5bO1B9NiOMSsO5Bm9dY4gWFDq4=\");\n\n_c = PostManage;\nexport default PostManage;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostManage\");","map":{"version":3,"sources":["E:/KTCity/react-course-project/react-monkey-blogging/src/module/post/PostManage.js"],"names":["Button","Dropdown","Table","db","collection","getDocs","limit","onSnapshot","query","where","DashboardHeading","React","useState","useEffect","POST_PER_PAGE","PostManage","postList","setPostList","filter","setFilter","lastDoc","setLastDoc","fetchData","colRef","newRef","documentSnapshots","lastVisible","docs","length","snapshot","results","forEach","doc","push","id","data","map","post","date","createdAt","seconds","Date","formatDate","toLocaleDateString","console","log","seonds","image","title","category","name","user","username"],"mappings":"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","sourcesContent":["import { Button } from \"components/button\";\nimport { Dropdown } from \"components/dropdown\";\nimport { Table } from \"components/table\";\nimport { db } from \"firebase-app/firebase-config\";\nimport {\n  collection,\n  getDocs,\n  limit,\n  onSnapshot,\n  query,\n  where,\n} from \"firebase/firestore\";\nimport DashboardHeading from \"module/dashboard/DashboardHeading\";\nimport React, { useState } from \"react\";\nimport { useEffect } from \"react\";\nconst POST_PER_PAGE = 10;\nconst PostManage = () => {\n  const [postList, setPostList] = useState([]);\n  const [filter, setFilter] = useState(\"\");\n  const [lastDoc, setLastDoc] = useState();\n  useEffect(() => {\n    async function fetchData() {\n      const colRef = collection(db, \"posts\");\n      const newRef = filter\n        ? query(\n            colRef,\n            where(\"name\", \">=\", filter),\n            where(\"name\", \"<=\", filter + \"utf8\")\n          )\n        : query(colRef, limit(POST_PER_PAGE));\n      const documentSnapshots = await getDocs(newRef);\n      const lastVisible =\n        documentSnapshots.docs[documentSnapshots.docs.length - 1];\n\n      onSnapshot(newRef, (snapshot) => {\n        let results = [];\n        snapshot.forEach((doc) => {\n          results.push({\n            id: doc.id,\n            ...doc.data(),\n          });\n        });\n        setPostList(results);\n      });\n      setLastDoc(lastVisible);\n    }\n    fetchData();\n  }, [filter]);\n  return (\n    <div>\n      <DashboardHeading\n        title=\"All posts\"\n        desc=\"Manage all posts\"\n      ></DashboardHeading>\n      <div className=\"mb-10 flex justify-end gap-5\">\n        <div className=\"w-full max-w-[200px]\">\n          <Dropdown>\n            <Dropdown.Select placeholder=\"Category\"></Dropdown.Select>\n          </Dropdown>\n        </div>\n        <div className=\"w-full max-w-[300px]\">\n          <input\n            type=\"text\"\n            className=\"w-full p-4 rounded-lg border border-solid border-gray-300\"\n            placeholder=\"Search post...\"\n          />\n        </div>\n      </div>\n      <Table>\n        <thead>\n          <tr>\n            <th>Id</th>\n            <th>Post</th>\n            <th>Category</th>\n            <th>Author</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {postList.length > 0 &&\n            postList.map((post) => {\n              const date = post?.createdAt?.seconds\n                ? new Date(post?.createdAt?.seconds * 1000)\n                : new Date();\n              const formatDate = new Date(date).toLocaleDateString(\"vi-VI\");\n              console.log(new Date(post?.createdAt?.seonds * 1000));\n              return (\n                <tr key={post.id}>\n                  <td>{post.id}</td>\n                  <td>\n                    <div className=\"flex items-center gap-x-3\">\n                      <img\n                        src={post.image}\n                        alt=\"\"\n                        className=\"w-[66px] h-[55px] rounded object-cover\"\n                      />\n                      <div className=\"flex-1\">\n                        <h3 className=\"font-semibold max-w-[100px] whitespace-pre-wrap\">\n                          {post.title}\n                        </h3>\n                        <time className=\"text-sm text-gray-500\">\n                          Date: {formatDate}\n                        </time>\n                      </div>\n                    </div>\n                  </td>\n                  <td>\n                    <span className=\"text-gray-500\">{post.category?.name}</span>\n                  </td>\n                  <td>\n                    <span className=\"text-gray-500\">{post.user?.username}</span>\n                  </td>\n                  <td>\n                    <div className=\"flex items-center gap-x-3 text-gray-500\">\n                      <span className=\"flex items-center justify-center w-10 h-10 border border-gray-200 rounded cursor-pointer\">\n                        <svg\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                          className=\"w-5 h-5\"\n                          fill=\"none\"\n                          viewBox=\"0 0 24 24\"\n                          stroke=\"currentColor\"\n                          strokeWidth=\"2\"\n                        >\n                          <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n                          />\n                          <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"\n                          />\n                        </svg>\n                      </span>\n                      <span className=\"flex items-center justify-center w-10 h-10 border border-gray-200 rounded cursor-pointer\">\n                        <svg\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                          className=\"w-5 h-5\"\n                          fill=\"none\"\n                          viewBox=\"0 0 24 24\"\n                          stroke=\"currentColor\"\n                          strokeWidth=\"2\"\n                        >\n                          <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\n                          />\n                        </svg>\n                      </span>\n                      <span className=\"flex items-center justify-center w-10 h-10 border border-gray-200 rounded cursor-pointer\">\n                        <svg\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                          className=\"w-5 h-5\"\n                          fill=\"none\"\n                          viewBox=\"0 0 24 24\"\n                          stroke=\"currentColor\"\n                          strokeWidth=\"2\"\n                        >\n                          <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n                          />\n                        </svg>\n                      </span>\n                    </div>\n                  </td>\n                </tr>\n              );\n            })}\n        </tbody>\n      </Table>\n      <div className=\"mt-10 text-center\">\n        {/* <Pagination></Pagination> */}\n        <Button kind=\"ghost\" className=\"mx-auto w-[200px]\">\n          See more+\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default PostManage;\n"]},"metadata":{},"sourceType":"module"}