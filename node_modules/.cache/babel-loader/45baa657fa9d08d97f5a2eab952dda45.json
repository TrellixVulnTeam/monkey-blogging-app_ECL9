{"ast":null,"code":"var _jsxFileName = \"E:\\\\KTCity\\\\react-course-project\\\\react-monkey-blogging\\\\src\\\\pages\\\\CategoryPage.js\",\n    _s = $RefreshSig$();\n\nimport Heading from \"components/layout/Heading\";\nimport Layout from \"components/layout/Layout\";\nimport { db } from \"firebase-app/firebase-config\";\nimport { collection, onSnapshot, query, where } from \"firebase/firestore\";\nimport PostItem from \"module/post/PostItem\";\nimport React from \"react\";\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CategoryPage = () => {\n  _s();\n\n  const [posts, setPosts] = useState([]);\n  const params = useParams();\n  useEffect(() => {\n    async function fetchData() {\n      const docRef = query(collection(db, \"posts\"), where(\"category.slug\", \"==\", params.slug));\n      onSnapshot(docRef, snapshot => {\n        const results = [];\n        snapshot.forEach(doc => {\n          results.push({\n            id: doc.id,\n            ...doc.data()\n          });\n        });\n        setPosts(results);\n      });\n    }\n\n    fetchData();\n  }, [params.slug]);\n  if (posts.length <= 0) return null;\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pt-10\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Heading, {\n        children: \"Danh mu\\u0323c\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid-layout grid-layout--primary\",\n        children: posts.map(item => /*#__PURE__*/_jsxDEV(PostItem, {\n          data: item\n        }, item.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CategoryPage, \"WRmvcn8GBGt6tkCPApYE60RtwEY=\", false, function () {\n  return [useParams];\n});\n\n_c = CategoryPage;\nexport default CategoryPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"CategoryPage\");","map":{"version":3,"sources":["E:/KTCity/react-course-project/react-monkey-blogging/src/pages/CategoryPage.js"],"names":["Heading","Layout","db","collection","onSnapshot","query","where","PostItem","React","useState","useEffect","useParams","CategoryPage","posts","setPosts","params","fetchData","docRef","slug","snapshot","results","forEach","doc","push","id","data","length","map","item"],"mappings":";;;AAAA,OAAOA,OAAP,MAAoB,2BAApB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAASC,EAAT,QAAmB,8BAAnB;AACA,SAASC,UAAT,EAAqBC,UAArB,EAAiCC,KAAjC,EAAwCC,KAAxC,QAAqD,oBAArD;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,SAAT,QAA0B,kBAA1B;;;AAEA,MAAMC,YAAY,GAAG,MAAM;AAAA;;AACzB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBL,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAMM,MAAM,GAAGJ,SAAS,EAAxB;AACAD,EAAAA,SAAS,CAAC,MAAM;AACd,mBAAeM,SAAf,GAA2B;AACzB,YAAMC,MAAM,GAAGZ,KAAK,CAClBF,UAAU,CAACD,EAAD,EAAK,OAAL,CADQ,EAElBI,KAAK,CAAC,eAAD,EAAkB,IAAlB,EAAwBS,MAAM,CAACG,IAA/B,CAFa,CAApB;AAIAd,MAAAA,UAAU,CAACa,MAAD,EAAUE,QAAD,IAAc;AAC/B,cAAMC,OAAO,GAAG,EAAhB;AACAD,QAAAA,QAAQ,CAACE,OAAT,CAAkBC,GAAD,IAAS;AACxBF,UAAAA,OAAO,CAACG,IAAR,CAAa;AACXC,YAAAA,EAAE,EAAEF,GAAG,CAACE,EADG;AAEX,eAAGF,GAAG,CAACG,IAAJ;AAFQ,WAAb;AAID,SALD;AAMAX,QAAAA,QAAQ,CAACM,OAAD,CAAR;AACD,OATS,CAAV;AAUD;;AACDJ,IAAAA,SAAS;AACV,GAlBQ,EAkBN,CAACD,MAAM,CAACG,IAAR,CAlBM,CAAT;AAmBA,MAAIL,KAAK,CAACa,MAAN,IAAgB,CAApB,EAAuB,OAAO,IAAP;AACvB,sBACE,QAAC,MAAD;AAAA,2BACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,eAGE;AAAK,QAAA,SAAS,EAAC,kCAAf;AAAA,kBACGb,KAAK,CAACc,GAAN,CAAWC,IAAD,iBACT,QAAC,QAAD;AAAwB,UAAA,IAAI,EAAEA;AAA9B,WAAeA,IAAI,CAACJ,EAApB;AAAA;AAAA;AAAA;AAAA,gBADD;AADH;AAAA;AAAA;AAAA;AAAA,cAHF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAaD,CApCD;;GAAMZ,Y;UAEWD,S;;;KAFXC,Y;AAsCN,eAAeA,YAAf","sourcesContent":["import Heading from \"components/layout/Heading\";\r\nimport Layout from \"components/layout/Layout\";\r\nimport { db } from \"firebase-app/firebase-config\";\r\nimport { collection, onSnapshot, query, where } from \"firebase/firestore\";\r\nimport PostItem from \"module/post/PostItem\";\r\nimport React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nconst CategoryPage = () => {\r\n  const [posts, setPosts] = useState([]);\r\n  const params = useParams();\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const docRef = query(\r\n        collection(db, \"posts\"),\r\n        where(\"category.slug\", \"==\", params.slug)\r\n      );\r\n      onSnapshot(docRef, (snapshot) => {\r\n        const results = [];\r\n        snapshot.forEach((doc) => {\r\n          results.push({\r\n            id: doc.id,\r\n            ...doc.data(),\r\n          });\r\n        });\r\n        setPosts(results);\r\n      });\r\n    }\r\n    fetchData();\r\n  }, [params.slug]);\r\n  if (posts.length <= 0) return null;\r\n  return (\r\n    <Layout>\r\n      <div className=\"container\">\r\n        <div className=\"pt-10\"></div>\r\n        <Heading>Danh muÌ£c</Heading>\r\n        <div className=\"grid-layout grid-layout--primary\">\r\n          {posts.map((item) => (\r\n            <PostItem key={item.id} data={item}></PostItem>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default CategoryPage;\r\n"]},"metadata":{},"sourceType":"module"}